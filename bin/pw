#!/usr/bin/env ruby

require 'pushwagner'

def get_version
  Pushwagner.info "You must specify which version you wish to deploy"
  STDIN.gets.strip
end

# TODO: detect version requirement from config
version = 1 # ENV["VERSION"] || get_version

env = ARGV[1] || ENV['PW_ENV'] || 'default'

main = Pushwagner::Main.new(:config_file => 'config/deploy.yml', :version => version, :environment => env)

# TODO: detect cli from config
case ARGV[0]
  when "deploy"
    main.deploy
  else
    Pushwagner.warning "Usage: pw <deploy|todo> [environment]"
end
